<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Index - ICICLE Training Catalog</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/cards.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Index";
        var mkdocs_page_input_path = "harp/README.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> ICICLE Training Catalog
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">ICICLE Training Catalog</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">AI for CI-for-AI</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" >Harp</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Index</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#components-and-characteristics-of-the-framework-from-figure-1">Components and Characteristics of the Framework (from Figure 1):</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ways-to-configure-harp-to-setup-applications-for-profiling">WAYS to configure HARP to setup applications for profiling:</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#way-1-configure-harp-with-tapis-to-configure-harp-and-applications-to-profile-as-container-images">WAY 1. Configure HARP with TAPIS to configure HARP and applications to profile as container images.</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#way-2-installation-based-harp-setup">WAY 2. Installation-based HARP setup</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#follow-these-steps-to-set-up-harp-as-a-loadable-software-module-on-the-ohio-supercomputer-osc">Follow these steps to set up HARP as a loadable software module on the Ohio Supercomputer (OSC):</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#follow-these-steps-to-set-the-harp-framework-on-a-standalone-linux-system">Follow these steps to set the HARP framework on a standalone Linux system:</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#using-harp-to-profile-an-application-and-predict-the-execution-time">Using HARP to profile an application and predict the execution time</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#using-the-harp-version-200-to-profile-an-application-eg-euler-number-on-local-box-and-cis-osc-and-tacc-using-tapis">Using the HARP (version 2.0.0) to profile an application (e.g., Euler Number) on local box and CIs (OSC and TACC) using TAPIS</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#using-the-harp-version-100-module-load-the-osc-of-the-harp-binary-on-the-local-box">Using the HARP (version 1.0.0) module, load the OSC of the HARP binary on the local box</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#releases">Releases</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#supported-systems">Supported Systems</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#citing-harp">Citing HARP</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#reporting-bugs-and-contribution">Reporting Bugs and Contribution</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#license">License</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Cheetah</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="cheetah/">Index</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Tests</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="cheetah/tests/">Index</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="cheetah/tests/build_summit/">How to build the dependencies on Summit</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="cheetah/tests/build_theta/">How to build dependencies on Theta</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Examples</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" >01 eulers number</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="examples/01-eulers_number/">Estimating walltime to execute "calc_e.py" with given configurations for application: Calculating Euler's number</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Install script source</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="install-script-source/">README</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Example</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="install-script-source/example/">Local Install Script Example</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >iSpLib</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../iSpLib/">iSpLib - An Intelligent Sparse Library</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Software Architecture and Design</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Base_ICICLE_Tapis_Software/">Base ICICLE Tapis Software</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Event_Engine/">Event Engine</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Hello icicle auth clients</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../hello_icicle_auth_clients/">Hello ICICLE Authentication Clients</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Icicle rel 03 2023</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../hello_icicle_auth_clients/icicle_rel_03_2023/">Hello ICICLE Authentication Clients Software Release Notes:</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" >CLI</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../hello_icicle_auth_clients/icicle_rel_03_2023/CLI/">Hello Icicle Authentication Clients Software Release Notes:</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" >ICICONSOLE</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" >TapisCL ICICLE</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Notebooks</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../hello_icicle_auth_clients/icicle_rel_03_2023/Notebooks/">Hello Icicle Authentication Clients Software Release Notes:</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Images</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../hello_icicle_auth_clients/images/readme/">Readme</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Tapis_Pods_Service/">Tapis Pods Service</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CI_Components_Catalog/">CI Components Catalog</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Animal Ecoloy</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Camera traps</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../camera-traps/">camera-traps</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../camera-traps/RELEASE_NOTES/">Camera Traps Release Notes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Custom install</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../camera-traps/custom_install/">Camera Traps Custom Installer</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >External plugins</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" >Image generating plugin</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../camera-traps/external_plugins/image_generating_plugin/">Image Generating Plugin</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Image scoring plugin</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../camera-traps/external_plugins/image_scoring_plugin/">Image Scoring Plugin</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Power measuring plugin</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../camera-traps/external_plugins/power_measuring_plugin/">Power Measure Plugin</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Releases</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../camera-traps/releases/">Running Released Versions of Camera-Traps</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" >0.3.1</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" >Integration test</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Src</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" >Python</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../camera-traps/src/python/">ctevents</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Digital Agriculture</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Camera traps</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../camera-traps/">camera-traps</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../camera-traps/RELEASE_NOTES/">Camera Traps Release Notes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Custom install</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../camera-traps/custom_install/">Camera Traps Custom Installer</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >External plugins</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" >Image generating plugin</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../camera-traps/external_plugins/image_generating_plugin/">Image Generating Plugin</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Image scoring plugin</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../camera-traps/external_plugins/image_scoring_plugin/">Image Scoring Plugin</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Power measuring plugin</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../camera-traps/external_plugins/power_measuring_plugin/">Power Measure Plugin</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Releases</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../camera-traps/releases/">Running Released Versions of Camera-Traps</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" >0.3.1</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" >Integration test</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Src</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" >Python</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../camera-traps/src/python/">ctevents</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Smart Foodsheds</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >PPODLinkML</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../PPODLinkML/">PPOD_FSL - A LinkML Schema for UC Davis Food Systems Lab Applications</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../PPODLinkML/LICENSE/">LICENSE</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Smart_Foodsheds_Visual_Analytics_Dashboard/">Smart Foodsheds Visual Analytics Dashboard</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">ICICLE Training Catalog</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">AI for CI-for-AI</li>
          <li class="breadcrumb-item">Harp</li>
      <li class="breadcrumb-item active">Index</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p><a href="https://opensource.org/licenses/BSD-3-Clause"><img alt="License" src="https://img.shields.io/badge/License-BSD_3--Clause-blue.svg" /></a></p>
<h1 id="harp-hpc-application-runtime-predictor">HARP - HPC Application Runtime Predictor</h1>
<h2 id="overview">Overview</h2>
<p>Researchers use high-performance computing (HPC) cyberinfrastructures (CI) like the Ohio Supercomputer (OSC) or Texas Advanced Computing Center (TACC) to execute computationally intensive diverse scientific workflows. Some workflows are heavy on IO, like genome sequencing (cleaning and assembly), while others, like training DNNs, could be compute (and memory) intensive. Each workflow has a unique resource requirement, and it is essential to profile and understand these needs to allocate shared resources for optimal utilization of the cyberinfrastructure. These resources are expensive, and several jobs compete to get these allocations, sometimes with reasonable wait times (while requesting enormous resources for a long time). Estimating the expected resources for optimally utilizing the compute and memory is challenging, especially considering the need for sufficient history to enable these predictions tailored for unique workflows and execution environments. We explored and established a framework (as shown in Figure 1) that pipelines the solutions to address these challenges. The Framework is configured to generate a history of executions and train suitable regression models to estimate the approximate execution time for a targeted application.</p>
<!-- 
![alt text](https://github.com/manikyaswathi/harp/tree/main/Documents/HARP_Pipeline.png?raw=true)

![alt text](https://github.com/manikyaswathi/harp/tree/main/Documents/Folder_Structure.png?raw=true)

 -->

<!--  ![HARP Pipeline](Documents/HARP_Pipeline.png) -->
<p><img src="https://github.com/ICICLE-ai/harp/blob/main/Documents/HARP_Pipeline.png" alt="HARP Pipeline" width=75% height=75% class="center">
          Figure 1: The Proposed Framework: training data generation, building regression models, selecting the best model based on custom criteria</p>
<h3 id="components-and-characteristics-of-the-framework-from-figure-1">Components and Characteristics of the Framework (from Figure 1):</h3>
<ol>
<li><strong>Generating and Preparing Training Data:</strong> This module automatically and systematically generates comprehensive, diverse "scaled-down(SD)" and limited, selective "full-scale(FS)" runs with minimal human intervention. We use Cheetah (https://github.com/CODARcode/cheetah) to execute the target application with the pre-defined data generation configurations (SD and FS) to generate the history-of-runs training data.</li>
<li><strong>Building Regression Models:</strong> This module standardizes and prepares the data, trains the selected off-the-shelf regression models with the appropriate hyper-parameters, and stores them for inference. In this phase, the data generated in the first phase is processed to train regression models. Redundant features are eliminated, outliers are removed, and features are transformed to reduce the dimensionality before training the regression models. </li>
<li><strong>Selecting Appropriate Prediction Model:</strong> This module selects the most appropriate regression model from a pool of trained models from phase 2 with respect to a given policy and target application
Note: The Framework is built on TensorFlow Framework.</li>
</ol>
<!--  ![Application Folder Structure and Files](Documents/Folder_Structure.png) -->

<p><img src="https://github.com/ICICLE-ai/harp/blob/main/Documents/Folder_Structure.png" alt="Application Folder Structure and Files" width=75% height=75% class="center">
              Figure 2: Shows the target-application execution endpoint and the harp application folder structure. </p>
<h2 id="ways-to-configure-harp-to-setup-applications-for-profiling">WAYS to configure HARP to setup applications for profiling:</h2>
<ol>
<li>Configure HARP with TAPIS to execute HARP and applications to profile as container images. </li>
<li>Install HARP as a loadable module on OSC or localbox.</li>
</ol>
<h2 id="way-1-configure-harp-with-tapis-to-configure-harp-and-applications-to-profile-as-container-images">WAY 1. Configure HARP with TAPIS to configure HARP and applications to profile as container images.</h2>
<p><strong>NOTE: IMPORTANT INFORMATION - PLEASE READ</strong></p>
<pre><code>1. TAPIS executes only containerized applications, so HARP (HARP framework) and the Application should be containerized.  
2. Profiling an application HARP Framework with TAPIS is tested on both TACC and OSC systems.
3. Colab Notebooks server as examples for running HARP profiling for a sample Euler application using TAPIS. Make a COPY of the colab or download the Notebooks to execute them. 
4. HARP Framework and example containers could be executed on local box user docker or apptaner servers without TAPIS integration. 
</code></pre>
<p>Follow through the Colab notebooks for profiling the HARP Container application using TAPIS:
1. For TACC stampede2 example use: https://drive.google.com/file/d/1JyAHUxxZ3pKMXGs28UXMQJn5QZmti1yS/view?usp=sharing
2. For OSC pitzer example use:https://drive.google.com/file/d/1w8qCTWiOjvn8CCx6FqvZzG8ZJBRKy4M3/view?usp=sharing
Alternatively, download the example notebook from the "Notebooks" folder</p>
<p><strong>Steps:</strong></p>
<ul>
<li>1.Create a new HARP Image [or] using the pre-made HARP Image</li>
<li>2.Create an image for the application to be profiled using HARP Framework (Image)</li>
<li>
<p>3.Refer to Section "<em>Using HARP to profile an application and predict the execution time</em>" for steps to execute the container in localbox or a CI (like OSC or TACC nodes) with or without TAPIS.</p>
</li>
<li>
<p><strong>Create a HARP Image using Docker Environment</strong></p>
</li>
</ul>
<p>a. Use the 'Dockerfile_HARP_local' file to create an Image for executing the Framework on a local box using 'docker build'. </p>
<pre><code>docker build -f DockerFiles/Dockerfile_HARP_local -t harp-framework-local:2.0.0 .

</code></pre>
<p>b. Use the Dockerfile_HARP_CI file to create an Image for executing the Framework on CI (like TACC or OSC) using 'docker build'. </p>
<pre><code>docker build -f DockerFiles/Dockerfile_HARP_CI -t harp-framework-ci:2.0.0 .
</code></pre>
<p>c. Push the Image to the docker hub or upload it to any web-accessible location. </p>
<p>Push the image to a web-accessible location like dockerhub using the following command:</p>
<pre><code>docker push &lt;DockerHub&gt;/harp-framework-[local|ci]:2.0.0
</code></pre>
<p>If you already have access to the pre-compiled images, use these copies of the HARP image from our repository 
a. Use the harp-framework-local:2.0.0  file for executing the Framework on a local box. 
b. Use the harp-framework-ci:2.0.0  file for executing the Framework on TACC or OSC Systems. </p>
<p><strong>Note</strong>: Execute the 'docker build' command from the main folder 'harp'.</p>
<ol>
<li><strong>Create an image for the application to be profiled using HARP Framework (Image)</strong></li>
</ol>
<p>Using the Image created in "Step 1" or the respective Image from the ICICLE repository, create an Image for the application to be profiled using the HARP Framework. We refer to the application to be profiled as a 'target application'. <br /></p>
<p>Steps for creating a DockeFile for the target application and building an image using the 'Dockerfile_App_Template' template. <br /></p>
<p>a. Edit the 'ProfileApplication.sh' entry point file to execute the HARP with the pipeline configurations JSON. Replace "pipeline_config.json" with your desired pipeline configuration file in the application work folder.</p>
<pre><code>harp pipeline_config.json
</code></pre>
<p>b. Create a DockerFile for the target application from the following template</p>
<pre><code>FROM &lt;web-accessible-path-to-image-hub&gt;/harp-framework-[local|ci]:2.0.0

# 1. Add application required installations.
# none for Euler example

# 2. Target application setup 
# Set the APP_PATH to the location with your application work folder (target application to be profiled) and APP_NAME to the work folder name
ENV APP_PATH=&quot;&lt;path-to-target-application&gt;/&lt;target-application-work-folder&gt;&quot;
ENV APP_NAME=&quot;&lt;target-application-work-folder&gt;&quot;

# Add the target application work folder to the Image
ADD $APP_PATH /app/$APP_PATH

# 3. Copy the execution endpoint file and set it
COPY DockerFiles/ProfileApplication.sh /app/ProfileApplication.sh

ENTRYPOINT [&quot;sh&quot;, &quot;/app/ProfileApplication.sh&quot;]
</code></pre>
<p>c. Build the application Image (these commands show building an image for an example application 'Euler Number')
a. Use the 'Dockerfile_App_EulerNumber' file to create an Image for executing the Framework on a local box using 'docker build'. </p>
<pre><code>docker build -f DockerFiles/Dockerfile_App_EulerNumber -t harp-app-eulernumber-[local|ci]:2.0.0 .
</code></pre>
<p>b. Push the Image to the docker hub or upload it to any web-accessible location. </p>
<p>Push the image to a web-accessible location like dockerhub using the following command:</p>
<pre><code>docker push &lt;DockerHub&gt;/harp-app-eulernumber-[local|ci]:2.0.0 
</code></pre>
<p>Use an existing copy of the Euler Number application image from our repository. </p>
<ol>
<li><strong>Refer to Section "<em>Using HARP to profile an application and predict the execution time</em>" for steps to execute the container in localbox or a CI (like OSC or TACC nodes) with or without TAPIS.</strong></li>
</ol>
<h2 id="way-2-installation-based-harp-setup">WAY 2. Installation-based HARP setup</h2>
<ul>
<li>Dependency: Linux, Python 3.9+, git, pip, mpich, psutil, jq(command line JSON parser https://stedolan.github.io/jq/)</li>
<li>On supercomputers (OSC), it should be installed at a location accessible from the parallel file system</li>
</ul>
<h3 id="follow-these-steps-to-set-up-harp-as-a-loadable-software-module-on-the-ohio-supercomputer-osc"><strong>Follow these steps to set up HARP as a loadable software module on the Ohio Supercomputer (OSC):</strong></h3>
<p><code>bash
  git clone https://github.com/ICICLE-ai/harp.git
  cd harp
  chmod 755 install-osc-harp.sh
  ./install-osc-harp.sh</code>
  If the installation fails, please re-run the script 'install-osc-harp.sh' after deleting the environment 'harp-env' and running the cleanup.sh in the install directory. 
  <code>bash
  conda remove --name harp-env --all
  ./cleanup.sh</code>
This setup installs miniconda, CODAR Cheetah (https://github.com/CODARcode/cheetah), TensorFlow, psutil, pandas, and scikit-learn and configures the Harp framework. Please follow the installation prompts to go ahead with the setup. This installation takes 30-40 mins to finish the setup on Owens login node.</p>
<h4 id="loading-the-harp-module-on-osc">Loading the HARP module on OSC</h4>
<p><code>bash
  module use $HOME/osc_apps/lmodfiles
  module load harp 
  export CONDA_HOME=&lt;path_to_miniconda&gt;/miniconda3
  source $CONDA_HOME/bin/activate
  source activate harp_env</code>
<strong>NOTE</strong></p>
<p>Things to consider while installing the Framework on OSC
1. [OSC Installation] The installer creates a conda environment, "harp_env" on OSC and uses this environment to execute the Framework. The environment name is used in a couple of Cheetash configurations and hence is mandated to use the same name, "harp_env," while installing the application. Please delete the environment if it already exists with this name before installing the Framework.
2. Upon successful installation, the install script will return the below response:
 (OSC Install Script) Generating Module File Step: /users/PAS0536/swathivm/osc_apps/lmodfiles/harp/1.0.lua
 (OSC Install Script) Generating Module File Step Finished
 Finished at Thu Mar 16 11:44:13 EDT 2023
 Execution time: 1965 seconds</p>
<h3 id="follow-these-steps-to-set-the-harp-framework-on-a-standalone-linux-system"><strong>Follow these steps to set the HARP framework on a standalone Linux system:</strong></h3>
<ul>
<li>Use these commands to install the dependencies using pip
  <code>bash
  pip install psutil
  pip install tensorflow
  pip install pandas
  pip install scikit-learn</code></li>
<li>Download the source code into the <install-dir> and set it to HARP_HOME
  <code>bash
  git clone https://github.com/ICICLE-ai/harp.git
  export HARP_HOME=&lt;path-to-download-folder&gt;/harp</code></li>
<li>Install Cheetah
  <code>bash
  cd $HARP_HOME/cheetah
  pip install --editable .</code></li>
<li>Ensure the scripts have '<strong>execute</strong>' privileges
  <code>bash
  cd $HARP_HOME/pipeline/bin/local
  chmod 755 harp
  cd $HARP_HOME/cheetah/bin
  chmod 755 *</code></li>
<li>Set the HARP pipeline and Cheetah binaries in the PATH
  <code>bash
  export PATH=$HARP_HOME/pipeline/bin/local:$HARP_HOME/cheetah/bin:$PATH</code>
 The HARP pipeline is ready to be used once the HARP_HOME and binaries are set in PATH. </li>
</ul>
<p><strong>NOTE</strong>
<strong>HARP has been tested on Ownes and Pitzer (OSC) and a standalone Linux system.</strong></p>
<p>Things to consider while installing the dependencies on standalone Linux systems:
1. if you do not have root or admin privileges, please consult your package manager on installing mpich and operator dependencies. </p>
<h2 id="using-harp-to-profile-an-application-and-predict-the-execution-time">Using HARP to profile an application and predict the execution time</h2>
<h3 id="using-the-harp-version-200-to-profile-an-application-eg-euler-number-on-local-box-and-cis-osc-and-tacc-using-tapis">Using the HARP (version 2.0.0) to profile an application (e.g., Euler Number) on local box and CIs (OSC and TACC) using TAPIS</h3>
<p>a. To profile the application, execute the application image built from the HARP parent image using the following commands on the localbox:</p>
<pre><code>[optional] docker pull ghcr.io/icicle-ai/harp-app-eulernumber-local:2.0.0
docker run --mount source=HARP_Store,target=/scratch ghcr.io/icicle-ai/harp-app-eulernumber-local:2.0.0
</code></pre>
<p>b. To profile the application using HARP on OSC or TACC <br /></p>
<p>i. Without TAPIS: Login into a compute node on OSC or TACC and run the following:</p>
<h4 id="for-osc-nodes">for OSC Nodes</h4>
<pre><code>module load singularity
[optional] singularity pull docker://ghcr.io/icicle-ai/harp-app-eulernumber-ci:2.0.0
singularity run docker://ghcr.io/icicle-ai/harp-app-eulernumber-ci:2.0.0 osc /fs/scratch/PAS2271/swathivm/
</code></pre>
<h4 id="for-tacc-nodes-stampede2">For TACC Nodes (Stampede2)</h4>
<pre><code>module load tacc-apptainer
[optional] singularity pull docker://ghcr.io/icicle-ai/harp-app-eulernumber-ci:2.0.0
singularity run docker://ghcr.io/icicle-ai/harp-app-eulernumber-ci:2.0.0 tacc none
</code></pre>
<p>ii. With TAPIS: Follow the instructions in the '<strong>Executing_HARP_using_TAPIS.ipynb</strong>' notebook in the 'Notebooks' folder to register OSC and TACC systems on TAPIS and profile the application 'harp-app-eulernumber-ci:2.0.0' using HARP</p>
<h3 id="using-the-harp-version-100-module-load-the-osc-of-the-harp-binary-on-the-local-box">Using the HARP (version 1.0.0) module, load the OSC of the HARP binary on the local box</h3>
<ol>
<li>Navigate to the target application folder and copy all the files from /Post_Execution_Scripts/basic into the current folder. </li>
<li>Edit path in post-script.sh to point to the target application directory</li>
<li>Execute the Framework as per the configurations in file 'train_config.json' as follows:
 <code>bash
  cd &lt;path_to_application&gt;
  chmod 755 *
  harp &lt;pipeline-configration&gt;.json</code></li>
<li>The results of the Framework are stored in the predictions.json file under the target application folder.
Please find the sample application under the example folder and follow the readme file to execute the Framework against profiling and estimating the resource needs.</li>
</ol>
<h2 id="releases">Releases</h2>
<p>The current release is <a href="https://github.com/ICICLE-ai/harp">2.0.0</a>.</p>
<h3 id="supported-systems">Supported Systems</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">System Name</th>
<th style="text-align: left;">Version V1 Support</th>
<th style="text-align: left;">Version V2 Support</th>
<th style="text-align: left;">CPU</th>
<th style="text-align: left;">GPU</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Local Linux machines</td>
<td style="text-align: left;">:white_check_mark:</td>
<td style="text-align: left;">:white_check_mark:</td>
<td style="text-align: left;">:white_check_mark:</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">Owens (OSC)</td>
<td style="text-align: left;">:white_check_mark:</td>
<td style="text-align: left;">:white_check_mark:</td>
<td style="text-align: left;">:white_check_mark:</td>
<td style="text-align: left;">:white_check_mark:</td>
</tr>
<tr>
<td style="text-align: left;">Pitzer (OSC)</td>
<td style="text-align: left;">:white_check_mark:</td>
<td style="text-align: left;">:white_check_mark:</td>
<td style="text-align: left;">:white_check_mark:</td>
<td style="text-align: left;">:white_check_mark:</td>
</tr>
<tr>
<td style="text-align: left;">Frontera (TACC)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">:white_check_mark:</td>
<td style="text-align: left;">:white_check_mark:</td>
<td style="text-align: left;">:white_check_mark:</td>
</tr>
<tr>
<td style="text-align: left;">Stampede2 (TACC)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">:white_check_mark:</td>
<td style="text-align: left;">:white_check_mark:</td>
<td style="text-align: left;">:white_check_mark:</td>
</tr>
</tbody>
</table>
<h2 id="citing-harp">Citing HARP</h2>
<p>Please cite the following paper if using HARP: <br />
 S. Vallabhajosyula and R. Ramnath, "Establishing a Generalizable Framework for Generating Cost-Aware Training Data and Building Unique Context-Aware Walltime Prediction Regression Models," 2022 IEEE Intl Conf on Parallel &amp; Distributed Processing with Applications, Big Data &amp; Cloud Computing, Sustainable Computing &amp; Communications, Social Computing &amp; Networking (ISPA/BDCloud/SocialCom/SustainCom), Melbourne, Australia, 2022, pp. 497-506, doi: 10.1109/ISPA-BDCloud-SocialCom-SustainCom57177.2022.00070.</p>
<p>Other papers:
 Vallabhajosyula, Manikya Swathi, and Rajiv Ramnath. "Towards Practical, Generalizable Machine-Learning Training Pipelines to build Regression Models for Predicting Application Resource Needs on HPC Systems." Practice and Experience in Advanced Research Computing. 2022. 1-5.</p>
<h2 id="reporting-bugs-and-contribution">Reporting Bugs and Contribution</h2>
<p>Please open an issue on the <a href="https://github.com/manikyaswathi/harp/issues">github issues</a> page to report a bug or email vallabhajosyula.2@buckeyemail.osu.edu (with subject "HARP GitHub")</p>
<p>HARP is an open-source repository, and we invite the community to collaborate and include their workflows into the Framework to profile their applications. Create a pull request to add your changes to the dev branch.</p>
<p>SUBSCRIBE to ICICLE discussion mailing list at https://icicle.osu.edu/engagement/mailing-lists</p>
<h2 id="license">License</h2>
<p>The HARP is licensed under the https://opensource.org/licenses/BSD-3-Clause</p>
<p># Acknowledgements</p>
<p><em>This work has been funded by grants from the National Science Foundation, including the ICICLE AI Institute (OAC 2112606) and EAGER (OAC 1945347)</em></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="ICICLE Training Catalog"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="cheetah/" class="btn btn-neutral float-right" title="Index">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="cheetah/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../js/tooltips.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
